# Simon Says Game in ATTiny13 MCU

## Description
This project is based in the e-radionica solder kit [[1]], [[2]] and the fantastic hackaday Simon Says project [[3]] by Vodja [[4]] with some modifications.
The aim of this project is to create a simple but still playable toy which can be used to learn basic skills in electronics.

## Characteristics
- Simon Says game
- With original sound and original timeout
- Less than 1kB code
- Power ON/OFF switch
- Sound ON/OFF switch (or not kill me neighbour's mode :-)
- Persistent best score and best sequence
- Secret mode: try it aganin
- Secret mode: restart same sequence
- Secret mode: clear best score
- Secret mode: two players mode - original emulation
- Loss, Win, Best Score, Final and Easer Egg LED animations
- Easer Egg - Random Jazz Machine (to dance with your friends)
- Easer Egg = Cycle warning light (stay safety :-)
- Power ON forgot alarm
- Low power consuption. Up to 5,5h with a 210mAh CR2032 battery

## Details
The heart of the game is ATtiny13. It is low power AVR 8-bit microcontroller with 1 kB flash memory, 64 bytes EEPROM and 64 bytes SRAM.

It has six I/O pins, from which one acts as a reset, this is not used in this project; four are connected to LEDs and buttons and the last one leads to the magnetodynamic buzzer. The device is powered from CR2032 lithium cell or compatible.

As mentioned, the device contains four LEDs of different colors (red, blue, yellow and green) connected with four button switches. Because each LED has different efficiency, resistors of different values must be connected in series with them.

After pressing each of those buttons, the LED lights up and information about the button state can be read by a microcontroller. The pins of a microcontroller are bi-directional, so they can be changed from input to output in any time and can control LEDs instead of the buttons.

The low-impedance (16 ohm) buzzer is connected from a pin port to ground avoiding the decoupling capacitor, the free weell diode in the GPIO port eliminates the reversed voltage peak in the coil. Like in an original game, each color is producing a particular tone when it is pressed or activated by the microcontroller and the frequencies are in an exact ratio 3:4:5:6 (50% duty cycle). The sound can be switched ON/OFF with the modified EASY/HARD level swich.

To avoid to making short-circuit on output pins, changing between input and output can be done only in low state (disabled internal pull-up resistor). 

Sufficient pseudo-random sequences are generated by a simple linear-feedback shift register, [FSR]

The value of random seed is generated from jitter between watchdog timer and calibrated RC oscillator. An padding with zeros, the probability of repeating the same sequence 1/255, which it is still low enough yet. We are playing.

The watchdog timer is used also for buttons debouncing, for base time and for timeout after 4 seconds of inactivity. The system loops leds and sound every 6 seconds if not ativity was detected to advise that the system is powered.

Best score is saved to the EEPROM (including the seed), so it is possible to re-play the best game (even after removing the battery).

The concept of this electronic set is to make it easy to build without any special tools or skills, and instruct about the concept of hacking the hardware with an easy modification over the original PCB that yiels a better and vitammined game.

## How it works
Normal mode: When the game is started switching ON with the ON/OFF switch, random seed is generated and you have to memorize and repeat increasing sequence of colors and tones. In higher levels the game goes faster. If you make a mistake, the correct LED blinks three times and game-over animation is played. If you have beaten the best score, your game (achieved level and seed value) is saved to the EEPROM and best-score animation is played. When you rearch the maximum level (32 levels), a special final animation plays the pseudo-random sequence (starting by your best seed). It takes almost 3.5 hours before the sequence starts repeating.

## Secret modes:
These modes are activated in the boot sequence. There are two ways to activated these modes: 
- With the power ON/OFF switch: In power OFF, press the required button and turn ON the game. 
- With the Timeout Watchdog Reset: In Power ON, press and hold the required button for 6 or more seconds.
When you release the button the secret mode is activated until new Power OFF or Reset sequence.

 1. **Green button**, you can continue with the best-scored game. It starts on the highest achieved level.
 2. **Red button**, you can play the best-scored game from the beginning.
 3. **Yellow button**, the best score is erased and you start a new random game as in the first case.
 4. **Blue button**, by pressing the blue button you will start a player vs player duel mode. Afert the startup animation player1 must init the duel switching to player2 that must repeat the sequence and increase a new level. The loop must be repeated to fail. This mode has been cloned from the original Simon Says.
 
## Easer Egg:
 The Easer Egg is activated when you insert a specific sequence in the two players mode... 
 You can use this Easer Egg for a crazy party... or maybe you can use this Easer Egg as warning bicycle light (if you forger your one).
 
## Modify the hardware:
It is very simple modify the original hardware:
1. Blend the HARD labeled terminal in the original difficult switch. Ensure that he blended terminal do not touch the ground pad in the pcb!!
2. Weld the ground speaker terminal to the battery ground in the pcb.
3. Weld the positive speaker termial to the blended switch terminal.

There is a picture showing the modifications:
<p align="center">
  <img src="assets/hardware_hack.jpg" width="350" title="Tiny13 Simon Hardware Modification">
</p>

You can buy this inexpensive speaker [here][Buzzer Aliexpress]

### Led Resistors
Because each LED has different efficiency, resistors of different values must be connected in series with them. 
This is a optional modification that could be usefull to learn about [Resistors Color Code]

| Left-Aligned  | Center Aligned  | Right Aligned |
| :------------ |:---------------:| -----:|
| col 3 is      | some wordy text | $1600 |
| col 2 is      | centered        |   $12 |
| zebra stripes | are neat        |    $1 |

ODR


### Adding the Buzzer 
The high-impedance (42 ohm) buzzer is connected in series with a capacitor (to eliminate DC voltage) to the output of internal 8-bit timer/counter. Like in an original game, each color is producing a particular tone when it is pressed or activated by the microcontroller and the frequencies are in an exact ratio 3:4:5:6 (50% duty cycle). 


## Software
### Main simplifications over original code
- Delay Base Time
- Increasing difficult with time
- Random
- EEPROM
- Sleep mode eliminated
- Minor simplifications, seed.
### Addons
- Two Players
- Jazz Machine
- Timeout Reset
### Secret codes




## Secret codes

## Video
[![Watch the video](https://player.vimeo.com/video/477245412)](https://player.vimeo.com/video/477245412)

## Resistor 

## Consuption

## Compiling

## Reference Libraies:
 - [MicroCore]
 - [picoCore]


## License
This project with exception of the software is licensed under a [Creative Commons Attribution-NonCommercial 4.0 International License][Creative Commons]. The software (source and binary) is licensed under the [MIT License][The MIT License]. 




1. First ordered list item
2. Another item
⋅⋅* Unordered sub-list. 
1. Actual numbers don't matter, just that it's a number
⋅⋅1. Ordered sub-list
4. And another item.

⋅⋅⋅You can have properly indented paragraphs within list items. Notice the blank line above, and the leading spaces (at least one, but we'll use three here to also align the raw Markdown).

⋅⋅⋅To have a line break without a paragraph, you will need to use two trailing spaces.⋅⋅
⋅⋅⋅Note that this line is separate, but within the same paragraph.⋅⋅
⋅⋅⋅(This is contrary to the typical GFM line break behaviour, where trailing spaces are not required.)

* Unordered list can use asterisks
- Or minuses
+ Or pluses



[I'm an inline-style link](https://www.google.com)

[I'm an inline-style link with title](https://www.google.com "Google's Homepage")

[I'm a reference-style link][Arbitrary case-insensitive reference text]

[I'm a relative reference to a repository file](../blob/master/LICENSE)

[You can use numbers for reference-style link definitions][1]

Or leave it empty and use the [link text itself].

URLs and URLs in angle brackets will automatically get turned into links. 
http://www.example.com or <http://www.example.com> and sometimes 
example.com (but not on Github, for example).

Some text to show that the reference links can follow later.

[arbitrary case-insensitive reference text]: https://www.mozilla.org
[link text itself]: http://www.reddit.com


 
 
[1]: https://www.tindie.com/products/e-radionica/simon-says-diy-learn-to-solder-kit/ "buy on tindie" 
[2]: https://e-radionica.com/en/simon-says-kit.html "buy on e-radionica"
[3]: https://hackaday.io/project/18952-simon-game-with-attiny13 "reference project"
[4]: https://hackaday.io/vojtak "hackaday simon attiny13, father"

[MicroCore]: https://github.com/MCUdude/MicroCore
[picoCore]: https://github.com/nerdralph/picoCore
[Creative Commons]: https://creativecommons.org/licenses/by-nc/4.0/
[The MIT License]: https://opensource.org/licenses/MIT
[Buzzer Amazon]: https://www.amazon.es/gp/product/B07Y82W2H8
[Buzzer Aliexpress]: https://es.aliexpress.com/item/4000203106698.html
[FSR]: https://en.wikipedia.org/wiki/Linear-feedback_shift_register
[Resistor Color Code]: https://static4.arrow.com/-/media/arrow/images/miscellaneous/h/how-to-read-resistor-color-codes.jpg

